<ion-content class="background-div">
    <div class="background-div-rounded">
        <div *ngIf="user && !avatar && avatarLoaded" class="avatar-profile" style="background-image: url('https://eu.ui-avatars.com/api/?name={{ user.name }}&background=ececec&size=128&color=2865a2&bold=true');" (click)="showLightbox()"></div>
        <div *ngIf="user && avatar && avatarLoaded" class="avatar-profile" style="background-image: url('{{ avatar }}');" (click)="showLightbox()"></div>
        <ng-image-fullscreen-view [images]="[{image: avatar ? avatar : 'https://eu.ui-avatars.com/api/?name={{ user.name }}&background=ececec&size=128&color=2865a2&bold=true' }]" [imageIndex]="0" [show]="showFlag" (close)="closeEventHandler()"></ng-image-fullscreen-view>
        <ion-skeleton-text *ngIf="!user || !avatarLoaded" class="avatar-profile-skeleton" animated></ion-skeleton-text>
        <ion-grid>
            <ion-row>
                <ion-col size='12' class="center name-profile">
                    <p *ngIf="user && user.type === 'client'">{{ user.name }}</p>
                    <p *ngIf="user && user.type === 'user'">{{ user.name }} - {{ (user.role) ? user.role : 'Employé' }}</p>
                    <ion-skeleton-text *ngIf="!user" style="width:100%;height: 30px;border-radius: 10px;" animated></ion-skeleton-text>
                </ion-col>
                <ion-col size='12' class="center">
                    <p *ngIf="user">{{ user.email }}</p>
                    <ion-skeleton-text *ngIf="!user" style="width:100%;height: 24px;border-radius: 10px;" animated></ion-skeleton-text>
                </ion-col>
                <!-- <ion-col size='12' class="center">
                    <p *ngIf="user && user.address && user.city && user.zip">{{ user.address + user.city + user.zip }}</p>
                    <ion-skeleton-text *ngIf="!user" style="width:100%;height: 34px;border-radius: 10px;" animated></ion-skeleton-text>
                </ion-col> -->
                <ion-col size='12' class="center first-profile-card">
                    <div class="profile-card pointer" (click)="navigateTo('/tabs/user-info')">
                        <div class="icon-profile-card pointer" (click)="navigateTo('/tabs/user-info')">
                            <div class="icon-div center">
                                <ion-icon src="assets/icon/edit.svg" class="app-icon edit-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer" (click)="navigateTo('/tabs/user-info')">
                            <p class="main-text">Informations du compte</p>
                            <p class="sub-text hide-overflow">Données personnelles, photo de profil</p>
                        </div>
                    </div>
                </ion-col>
                <ion-col size='12' class="center">
                    <div class="profile-card pointer" (click)="navigateTo('/tabs/user-change-password')">
                        <div class="icon-profile-card pointer" (click)="navigateTo('/tabs/user-change-password')">
                            <div class="icon-div center">
                                <ion-icon name="lock-closed-outline" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer" (click)="navigateTo('/tabs/user-change-password')">
                            <p class="main-text">Informations de sécurité</p>
                            <p class="sub-text hide-overflow">Mot de passe, double authentification</p>
                        </div>
                    </div>
                </ion-col>
                <ion-col size='12' class="center" *ngIf="user && (user.type === 'client' || user.role === 'Gérant')">
                    <div class="profile-card pointer" (click)="navigateTo('/tabs/user-change-address')">
                        <div class="icon-profile-card pointer" (click)="navigateTo('/tabs/user-change-address')">
                            <div class="icon-div center">
                                <ion-icon src="assets/icon/place.svg" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer" (click)="navigateTo('/tabs/user-change-address')">
                            <p class="main-text">Informations de location</p>
                            <p class="sub-text hide-overflow">Mettre à jour votre adresse</p>
                        </div>
                    </div>
                </ion-col>
                <ion-col size='12' class="center" *ngIf="user && (user.type === 'client' || user.role === 'Gérant')">
                    <div class="profile-card pointer" (click)="navigateTo('/tabs/user-change-enterprise')">
                        <div class="icon-profile-card pointer" (click)="navigateTo('/tabs/user-change-enterprise')">
                            <div class="icon-div center">
                                <ion-icon name="business-outline" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer" (click)="navigateTo('/tabs/user-change-enterprise')">
                            <p class="main-text">Informations d'entreprise</p>
                            <p class="sub-text hide-overflow">Mettre à jour votre entreprise</p>
                        </div>
                    </div>
                </ion-col>
                <!-- <ion-col size='12' class="center">
                    <div class="profile-card pointer" (click)="navigateTo('/tabs/tab2')">
                        <div class="icon-profile-card pointer" (click)="navigateTo('/tabs/tab2')">
                            <div class="icon-div center">
                                <ion-icon name="document-text-outline" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer" (click)="navigateTo('/tabs/tab2')">
                            <p class="main-text">Notes de frais</p>
                            <p class="sub-text hide-overflow">Visioner l'ensemble des notes</p>
                        </div>
                    </div>
                </ion-col> -->
                <ion-col size='12' class="center">
                    <div class="profile-card pointer" (click)="showHistory()">
                        <div class="icon-profile-card pointer">
                            <div class="icon-div center">
                                <ion-icon name="timer-outline" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer">
                            <p class="main-text">Historique d'action</p>
                            <p class="sub-text hide-overflow">Visioner l'ensemble des actions</p>
                        </div>
                    </div>
                </ion-col>
                <ion-col size='12' class="center">
                    <div class="profile-card pointer" (click)="showPrivatePolicy()">
                        <div class="icon-profile-card pointer">
                            <div class="icon-div center">
                                <ion-icon name="information-circle-outline" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer">
                            <p class="main-text">Politique de confidentialité</p>
                            <p class="sub-text hide-overflow">Information utilisateur, sécurité, vie privé</p>
                        </div>
                    </div>
                </ion-col>
                <ion-col size='12' class="center mb-2">
                    <div class="profile-card pointer" (click)="navigateTo('/auth/login')">
                        <div class="icon-profile-card pointer" (click)="navigateTo('/auth/login')">
                            <div class="icon-div center">
                                <ion-icon name="log-out-outline" class="app-icon"></ion-icon>
                            </div>
                        </div>
                        <div class="text-profile-card pointer" (click)="logout()">
                            <p class="main-text">Déconnexion</p>
                            <p class="sub-text hide-overflow">Sortir de l'application</p>
                        </div>
                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>
</ion-content>