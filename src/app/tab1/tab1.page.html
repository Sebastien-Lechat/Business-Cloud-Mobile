<ion-content>
    <app-header></app-header>
    <app-add-btn></app-add-btn>
    <app-load-bar [active]="loading"></app-load-bar>
    <ion-grid>
        <ion-row>
            <ion-col size='5'>
                <ion-item class="select-input">
                    <ion-select id="status" placeholder="Statut..." value="0" (ionChange)="filterProjects($event)" okText="Ok" cancelText="Fermer">
                        <ion-select-option value="0">Statut...</ion-select-option>
                        <ion-select-option value="1">Terminé</ion-select-option>
                        <ion-select-option value="2">En retard</ion-select-option>
                        <ion-select-option value="3">En attente / En cours</ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
            <ion-col size='5'>
                <ion-item class="select-input">
                    <ion-select id="sorting" placeholder="Tri..." value="0" (ionChange)="filterProjects($event)" okText="Ok" cancelText="Fermer">
                        <ion-select-option value="0">Tri...</ion-select-option>
                        <ion-select-option value="1">Date de début &#9660;</ion-select-option>
                        <ion-select-option value="2">Date de début &#9650;</ion-select-option>
                        <ion-select-option value="3">Date de fin &#9660;</ion-select-option>
                        <ion-select-option value="4">Date de fin &#9650;</ion-select-option>
                        <ion-select-option value="5">Revenus &#9660;</ion-select-option>
                        <ion-select-option value="6">Revenus &#9650;</ion-select-option>
                        <ion-select-option value="7">Temps total &#9660;</ion-select-option>
                        <ion-select-option value="8">Temps total &#9650;</ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
            <ion-col size='2' class="center">
                <ion-icon name="calendar-outline" class="app-icon calendar-icon"></ion-icon>
            </ion-col>
            <ion-col size='12' class="center">
                <input type="text" class="input-with-icon" placeholder='Recherche...' [(ngModel)]="searchValue" (keyup)="filterProjects()">
                <ion-icon name="search-outline" class="input-icon"></ion-icon>
            </ion-col>
        </ion-row>
    </ion-grid>
    <ion-content class="scroll-list">
        <ion-refresher slot="fixed" (ionRefresh)="this.refreshData($event)">
            <ion-refresher-content pullingIcon="none" refreshingSpinner="circles">
            </ion-refresher-content>
        </ion-refresher>
        <ion-list>
            <ion-card class="app-card pointer" *ngFor="let project of filteredProjects" (click)="navigateTo('/tabs/show-project/', project.id)">
                <ion-card-content>
                    <ion-grid>
                        <ion-row>
                            <ion-col size='7'>
                                <h2 class="card-title hide-overflow">{{ project.title }}</h2>
                                <p class="card-text-client hide-overflow">{{ project.clientId.name }}</p>
                                <p class="card-text-date hide-overflow">Fin: {{ project.deadline | date: 'longDate' : 'Europe/France' : 'fr-FR'}}</p>
                            </ion-col>
                            <ion-col size='3'>
                                <h2 class="card-title hide-overflow">&nbsp;</h2>
                                <p class="card-text-loss">-3,578 €</p>
                                <p class="card-text-time">355h</p>
                            </ion-col>
                            <ion-col size='2' class="center">
                                <div *ngIf="project.status === 'En attente'" class="status-div-warning"></div>
                                <div *ngIf="project.status === 'En cours'" class="status-div-warning"></div>
                                <div *ngIf="project.status === 'En retard'" class="status-div-danger"></div>
                                <div *ngIf="project.status === 'Terminé'" class="status-div-success"></div>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-card-content>
            </ion-card>
        </ion-list>
    </ion-content>
    <!-- <ion-infinite-scroll threshold="50px" (ionInfinite)="loadData($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll> -->
</ion-content>